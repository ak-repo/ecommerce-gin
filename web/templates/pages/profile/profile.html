{{define "title"}}Admin Profile{{end}} {{define "content"}}
<div
  class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden"
>
  <!-- Header with gradient background -->
  <div
    class="bg-green-700 px-8 py-12 text-white"
  >
    <div class="flex flex-col md:flex-row items-center gap-8">
      <!-- Profile Picture -->
      <div class="relative">
        {{if .Profile.ProfilePic}}
        <img
          src="/uploads/{{.Profile.ProfilePic.ImageURL}}"
          alt="Profile Picture"
          class="w-32 h-32 rounded-full object-cover shadow-2xl border-4 border-white/30 mx-auto transition-transform hover:scale-105"
        />
        {{else}}
        <div
          class="w-32 h-32 flex items-center justify-center rounded-full bg-gradient-to-br from-white/20 to-white/10 text-white text-4xl font-bold shadow-2xl border-4 border-white/30 backdrop-blur-sm"
        >
          {{slice .Profile.Name 0 1}}
        </div>
        {{end}}
        <div
          class="absolute -bottom-2 -right-2 bg-white rounded-full p-2 shadow-lg"
        >
          <svg
            class="w-6 h-6 text-blue-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
            />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"
            />
          </svg>
        </div>
      </div>

      <!-- Profile Info -->
      <div class="text-center md:text-left flex-1">
        <h1 class="text-4xl font-bold mb-2">{{.Profile.Name}}</h1>
        <p class="text-blue-100 text-lg mb-4">{{.Profile.Email}}</p>
        <div class="flex flex-wrap gap-4 justify-center md:justify-start">
          <div class="bg-white/20 backdrop-blur-sm rounded-full px-4 py-2">
            <span class="text-sm text-blue-100">Admin ID:</span>
            <span class="font-semibold ml-1">{{.Profile.ID}}</span>
          </div>
          <div class="bg-white/20 backdrop-blur-sm rounded-full px-4 py-2">
            <span class="text-sm text-blue-100">Role:</span>
            <span class="font-semibold ml-1 text-green-200"
              >{{.Profile.Role}}</span
            >
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="p-8">
    <!-- Upload Section -->
    <div
      class="bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6 mb-8 border border-gray-200"
    >
      <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
        <svg
          class="w-5 h-5 mr-3 text-blue-600"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
          />
        </svg>
        Update Profile Picture
      </h3>
      <form
        action="/api/v1/admin/profile/profile_pic"
        method="POST"
        enctype="multipart/form-data"
        class="flex flex-col md:flex-row items-center gap-6"
      >
        <div class="flex-1">
          <label
            class="block w-full text-center bg-white hover:bg-blue-50 cursor-pointer rounded-xl border-2 border-dashed border-blue-300 py-6 px-8 text-blue-700 font-medium transition-all duration-300 hover:border-blue-400 hover:shadow-md"
          >
            <input
              type="file"
              name="profile_pic"
              accept="image/*"
              required
              class="hidden"
              onchange="previewImage(event)"
            />
            <div class="flex flex-col items-center">
              <svg
                class="w-10 h-10 text-blue-500 mb-3"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                />
              </svg>
              <span class="text-lg">Choose new profile picture</span>
              <span class="text-sm text-gray-500 mt-1"
                >JPG, PNG or GIF (Max 5MB)</span
              >
            </div>
          </label>
        </div>
        <div class="flex flex-col items-center gap-4">
          <img
            id="preview"
            src="#"
            alt="Preview"
            class="hidden w-20 h-20 rounded-full object-cover border-2 border-gray-300 shadow-sm"
          />
          <button
            type="submit"
            class="bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-8 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl inline-flex items-center transform hover:-translate-y-0.5"
          >
            <svg
              class="w-5 h-5 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
              />
            </svg>
            Upload Image
          </button>
        </div>
      </form>
    </div>

    <!-- Profile & Address Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
      <!-- Profile Information Card -->
      <div
        class="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"
      >
        <h2
          class="text-xl font-semibold text-gray-800 mb-6 flex items-center pb-3 border-b border-gray-100"
        >
          <svg
            class="w-6 h-6 mr-3 text-blue-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            />
          </svg>
          Profile Information
        </h2>
        <div class="space-y-5">
          <div
            class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg"
          >
            <span class="text-sm font-medium text-gray-600">Admin ID</span>
            <span class="text-gray-900 font-semibold">{{.Profile.ID}}</span>
          </div>
          <div
            class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg"
          >
            <span class="text-sm font-medium text-gray-600">Role</span>
            <span
              class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1 rounded-full text-sm font-semibold"
              >{{.Profile.Role}}</span
            >
          </div>
          {{if .Profile.Address.Phone}}
          <div
            class="flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg"
          >
            <span class="text-sm font-medium text-gray-600">Phone</span>
            <span class="text-gray-900 font-semibold"
              >{{.Profile.Address.Phone}}</span
            >
          </div>
          {{end}}
        </div>
      </div>

      <!-- Address Card -->
      <div
        class="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow"
      >
        <h2
          class="text-xl font-semibold text-gray-800 mb-6 flex items-center pb-3 border-b border-gray-100"
        >
          <svg
            class="w-6 h-6 mr-3 text-blue-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
            />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
            />
          </svg>
          Address Information
        </h2>
        {{if .Profile.Address.ID}}
        <div
          class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100"
        >
          <div class="space-y-3">
            <p class="text-gray-900 font-semibold text-lg">
              {{.Profile.Address.AddressLine}}
            </p>
            <p class="text-gray-700">
              {{.Profile.Address.City}}, {{.Profile.Address.State}} -
              {{.Profile.Address.PostalCode}}
            </p>
            <p class="text-gray-600">{{.Profile.Address.Country}}</p>
          </div>
          <a
            href="/api/v1/admin/profile/address/{{.Profile.Address.ID}}"
            class="inline-flex items-center mt-4 bg-white text-blue-600 border border-blue-200 py-2 px-5 rounded-lg hover:bg-blue-50 transition-all duration-300 font-medium hover:shadow-sm"
          >
            <svg
              class="w-4 h-4 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
              />
            </svg>
            Edit Address
          </a>
        </div>
        {{else}}
        <div class="text-center py-8">
          <div
            class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <svg
              class="w-8 h-8 text-gray-400"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
              />
            </svg>
          </div>
          <p class="text-gray-500 mb-6">No address added yet.</p>
          <a
            href="/api/v1/admin/profile/address/0"
            class="inline-flex items-center bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          >
            <svg
              class="w-5 h-5 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4v16m8-8H4"
              />
            </svg>
            Add Address
          </a>
        </div>
        {{end}}
      </div>
    </div>

    <!-- Security & Actions -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Security Card -->
      <div
        class="bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl p-6 border border-gray-200"
      >
        <h2
          class="text-xl font-semibold text-gray-800 mb-6 flex items-center pb-3 border-b border-gray-100"
        >
          <svg
            class="w-6 h-6 mr-3 text-blue-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
            />
          </svg>
          Security Settings
        </h2>
        <a
          href="/api/v1/admin/password-change"
          class="inline-flex items-center bg-white text-gray-700 border border-gray-300 py-3 px-6 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium hover:shadow-md w-full justify-center"
        >
          <svg
            class="w-5 h-5 mr-3 text-gray-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"
            />
          </svg>
          Change Password
        </a>
      </div>

      <!-- Logout Card -->
      <div
        class="bg-gradient-to-br from-red-50 to-orange-50 rounded-2xl p-6 border border-red-100"
      >
        <h2
          class="text-xl font-semibold text-gray-800 mb-6 flex items-center pb-3 border-b border-red-100"
        >
          <svg
            class="w-6 h-6 mr-3 text-red-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
            />
          </svg>
          Session
        </h2>
        <a
          href="/api/v1/admin/logout"
          class="inline-flex items-center bg-gradient-to-r from-red-600 to-red-700 text-white py-3 px-6 rounded-xl hover:from-red-700 hover:to-red-800 transition-all duration-300 font-medium shadow-lg hover:shadow-xl w-full justify-center transform hover:-translate-y-0.5"
        >
          <svg
            class="w-5 h-5 mr-3"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
            />
          </svg>
          Logout Account
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  function previewImage(event) {
    const preview = document.getElementById("preview");
    const file = event.target.files[0];

    if (file) {
      preview.src = URL.createObjectURL(file);
      preview.classList.remove("hidden");
      preview.classList.add("animate-pulse");

      // Remove animation after image loads
      preview.onload = function () {
        preview.classList.remove("animate-pulse");
      };
    }
  }
</script>
{{end}}
