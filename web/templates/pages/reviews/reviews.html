{{define "title"}}Admin Reviews{{end}} {{define "content"}}
<h1 class="text-3xl font-bold mb-6 text-gray-800">üìù Product Reviews</h1>

<!-- Flash or Error Message -->
{{if .Error}}
<div
  class="mb-4 p-4 bg-red-50 border-l-4 border-red-400 text-red-700 rounded-lg shadow-sm"
>
  {{.Error}}
</div>
{{end}} {{if .Success}}
<div
  class="mb-4 p-4 bg-green-50 border-l-4 border-green-400 text-green-700 rounded-lg shadow-sm"
>
  {{.Success}}
</div>
{{end}}

<!-- Reviews Table -->
<div class="bg-white shadow rounded-xl overflow-hidden border border-gray-200">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          ID
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          Product
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          User
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          Rating
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          Comment
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          Status
        </th>
        <th
          class="px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider"
        >
          Actions
        </th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      {{range .Reviews}}
      <tr class="hover:bg-gray-50 transition-colors">
        <td class="px-6 py-4 text-sm text-gray-800">{{.ID}}</td>
        <td class="px-6 py-4 text-sm text-gray-800">
          <div>
            <span class="font-medium">{{.ProductName}}</span>
            <div class="text-xs text-gray-500">#{{.ProductID}}</div>
          </div>
        </td>
        <td class="px-6 py-4 text-sm text-gray-800">
          <div>
            <span class="font-medium">{{.UserName}}</span>
            <div class="text-xs text-gray-500">#{{.UserID}}</div>
          </div>
        </td>
        <td class="px-6 py-4 text-sm text-yellow-600 font-semibold">
          {{.Rating}} ‚òÖ
        </td>
        <td class="px-6 py-4 text-sm text-gray-700 max-w-xs truncate">
          {{.Comment}}
        </td>
        <td class="px-6 py-4">
          {{if eq .Status "PENDING"}}
          <span
            class="px-3 py-1 text-xs rounded-full bg-yellow-100 text-yellow-700 font-medium"
            >Pending</span
          >
          {{else if eq .Status "APPROVED"}}
          <span
            class="px-3 py-1 text-xs rounded-full bg-green-100 text-green-700 font-medium"
            >Approved</span
          >
          {{else}}
          <span
            class="px-3 py-1 text-xs rounded-full bg-red-100 text-red-700 font-medium"
            >Rejected</span
          >
          {{end}}
        </td>
        <td class="px-6 py-4 text-right space-x-2">
          {{if eq .Status "PENDING"}}
          <form
            action="/admin/reviews/approve/{{.ID}}"
            method="POST"
            class="inline"
          >
            <input type="hidden" name="status" value="APPROVED" />
            <button
              class="bg-green-500 hover:bg-green-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg shadow-sm transition"
            >
              Approve
            </button>
          </form>
          <form
            action="/admin/reviews/reject/{{.ID}}"
            method="POST"
            class="inline"
          >
            <input type="hidden" name="status" value="REJECTED" />
            <button
              class="bg-red-500 hover:bg-red-600 text-white text-xs font-semibold px-3 py-1.5 rounded-lg shadow-sm transition"
            >
              Reject
            </button>
          </form>
          {{else}}
          <span class="text-gray-400 text-sm">‚Äî</span>
          {{end}}
        </td>
      </tr>
      {{end}}
    </tbody>
  </table>

  {{if not .Reviews}}
  <div class="text-center p-8 text-gray-500 text-sm">No reviews found.</div>
  {{end}}
</div>
{{end}}
