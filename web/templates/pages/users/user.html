{{define "title"}}Admin - User Detail{{end}}
{{define "content"}}

<!-- Page Title -->
<h1 class="text-3xl font-bold mb-8 text-gray-800 flex items-center gap-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1119 9m0 0a9.004 9.004 0 00-9 9" />
  </svg>
  User Details
</h1>

<!-- Error Message -->
{{if .Error}}
  <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 shadow">
    {{.Error}}
  </div>
{{else}}

<!-- Main Card -->
<div class="bg-white/70 backdrop-blur-lg shadow-lg rounded-2xl p-6 max-w-3xl mx-auto border border-gray-100">

  <!-- User Info -->
  <div class="grid grid-cols-2 gap-4 mb-6">
    <div>
      <p class="text-sm text-gray-500">User ID</p>
      <p class="font-semibold text-gray-800">{{.User.ID}}</p>
    </div>
    <div>
      <p class="text-sm text-gray-500">Username</p>
      <p class="font-semibold text-gray-800">{{.User.Username}}</p>
    </div>
    <div>
      <p class="text-sm text-gray-500">Email</p>
      <p class="font-semibold text-gray-800">{{.User.Email}}</p>
    </div>
    <div>
      <p class="text-sm text-gray-500">Role</p>
      <span class="inline-block px-2 py-1 rounded-full text-sm font-semibold 
        {{if eq .User.Role "admin"}}bg-blue-100 text-blue-700
        {{else if eq .User.Role "store"}}bg-yellow-100 text-yellow-700
        {{else}}bg-green-100 text-green-700{{end}}">
        {{.User.Role}}
      </span>
    </div>
    <div>
      <p class="text-sm text-gray-500">Status</p>
      <span class="inline-block px-2 py-1 rounded-full text-sm font-semibold 
        {{if eq .User.Status "active"}}bg-green-100 text-green-700{{else}}bg-red-100 text-red-700{{end}}">
        {{.User.Status}}
      </span>
    </div>
    <div>
      <p class="text-sm text-gray-500">Email Verified</p>
      <p class="font-semibold text-gray-800">{{.User.EmailVerified}}</p>
    </div>
    <div>
      <p class="text-sm text-gray-500">Last Login</p>
      <p class="font-semibold text-gray-800">
        {{if .User.LastLoginAt}}{{.User.LastLoginAt}}{{else}}-{{end}}
      </p>
    </div>
    <div>
      <p class="text-sm text-gray-500">Created At</p>
      <p class="font-semibold text-gray-800">{{.User.CreatedAt}}</p>
    </div>
  </div>

  <!-- Divider -->
  <hr class="my-6 border-gray-200">

  <!-- Action Buttons -->
  <div class="flex flex-wrap gap-3">

    <!-- Change Role Form -->
    <form method="POST" action="/api/v1/admin/users/{{.User.ID}}/role" class="flex items-center gap-2">
      <select name="role" class="border px-2 py-1 rounded text-gray-700">
        <option value="customer" {{if eq .User.Role "customer"}}selected{{end}}>Customer</option>
       
        <option value="admin" {{if eq .User.Role "admin"}}selected{{end}}>Admin</option>
      </select>
      <button type="submit" class="bg-blue-500 text-white px-4 py-1.5 rounded-lg hover:bg-blue-600 transition">
        Change Role
      </button>
    </form>

    <!-- Only show Block/Unblock if not admin -->
    {{if ne .User.Role "admin"}}
    <form method="POST" action="/api/v1/admin/users/{{.User.ID}}/status">
      {{if eq .User.Status "active"}}
        <button type="submit" class="bg-red-500 text-white px-4 py-1.5 rounded-lg hover:bg-red-600 transition">
          Block User
        </button>
      {{else}}
        <button type="submit" class="bg-yellow-500 text-white px-4 py-1.5 rounded-lg hover:bg-yellow-600 transition">
          Unblock User
        </button>
      {{end}}
    </form>
    {{end}}

      <a href="/api/v1/admin/users/delete/{{.User.ID}}" 
         class="bg-indigo-500 text-white px-4 py-1.5 rounded-lg hover:bg-indigo-600 transition">
        Delete
      </a>
 

  </div>

  <!-- Back Button -->
  <div class="mt-8">
    <a href="/api/v1/admin/users" 
       class="inline-block bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition">
      ‚Üê Back to User List
    </a>
  </div>
</div>

{{end}}
{{end}}
